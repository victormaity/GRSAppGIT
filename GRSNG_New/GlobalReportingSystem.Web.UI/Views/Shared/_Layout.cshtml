@using System.Globalization
@using System.Security.Principal
@using GlobalReportingSystem.BL.Helper
@using GlobalReportingSystem.Core.Abstract.BL.Helper
@using Microsoft.Practices.ServiceLocation
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta charset="utf-8" />
    <title>@ViewBag.Title</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />

    <link rel="stylesheet" href="@Url.Content("~/Content/assets/css/jquery-ui.min.css")" />
    <link rel="stylesheet" href="@Url.Content("~/Content/assets/css/sunburst.css")" />
    <link rel="stylesheet" href="@Url.Content("~/Content/flipclock/flipclock.css")" />
    <link rel="stylesheet" href="@Url.Content("~/Content/assets/css/bootstrap-editable.css")" />
    <link rel="stylesheet" href="@Url.Content("~/Content/jstree/themes/default/style.min.css")" />
    <link rel="shortcut icon" type="image/ico" href="@Url.Content("~/Content/gears.ico")" />


    <!-- bootstrap & fontawesome -->
    <link rel="stylesheet" href="@Url.Content("~/Content/assets/css/bootstrap.min.css")" />
    <link rel="stylesheet" href="@Url.Content("~/Content/assets/css/font-awesome.min.css")" />

    <link rel="stylesheet" href="@Url.Content("~/Content/css/CommonStyles.css")" />
    <!-- page specific plugin styles -->
    <!-- text fonts -->
    <link rel="stylesheet" href="@Url.Content("~/Content/assets/css/ace-fonts.css")" />

    <!-- ace styles -->
    <link rel="stylesheet" href="@Url.Content("~/Content/assets/css/ace.min.css")" />

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="@Url.Content("~/Content/assets/css/ace-part2.min.css")" />
    <![endif]-->
    <link rel="stylesheet" href="@Url.Content("~/Content/assets/css/ace-skins.min.css")" />
    <link rel="stylesheet" href="@Url.Content("~/Content/assets/css/ace-rtl.min.css")" />
    <link rel="stylesheet" href="@Url.Content("~/Content/assets/css/colorpicker.css")" />
    <!--[if lte IE 9]>
        <link rel="stylesheet" href="@Url.Content("~/Content/assets/css/ace-ie.min.css")" />
    <![endif]-->
    <!-- inline styles related to this page -->
    @*  <script src="@Url.Content("~/Content/assets/js/dropzone.min.js")"></script>*@

    <script src="@Url.Content("~/Content/assets/js/rainbow.js")"></script>
    <script src="@Url.Content("~/Content/assets/js/generic.js")"></script>
    <script src="@Url.Content("~/Content/assets/js/html.js")"></script>
    <script src="@Url.Content("~/Content/assets/js/css.js")"></script>
    <script src="@Url.Content("~/Content/assets/js/javascript.js")"></script>






    <!-- ace settings handler -->
    <script src="@Url.Content("~/Content/assets/js/ace-extra.min.js")"></script>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lte IE 8]>
        <script src="@Url.Content("~/Content/assets/js/html5shiv.js")"></script>
        <script src="@Url.Content("~/Content/assets/js/respond.min.js")"></script>
    <![endif]-->
    <div />

    <script type="text/javascript">
        window.jQuery || document.write("<script src='@Url.Content("~/Content/assets/js/jquery.min.js")'>" + "<" + "/script>");
    </script>

    <!-- <![endif]-->
    <script src="@Url.Content("~/Content/assets/js/ace/ace.onpage-help.js")"></script>
    <script src="@Url.Content("~/Content/assets/js/bootstrap-colorpicker.min.js")"></script>
    <script src="@Url.Content("~/Content/assets/js/ace/elements.colorpicker.js")"></script>
    <script src="@Url.Content("~/Content/assets/js/date-time/daterangepicker.min.js")"></script>
    <script src="@Url.Content("~/Content/assets/js/date-time/bootstrap-datepicker.min.js")"></script>
    <script src="@Url.Content("~/Content/assets/js/jquery-ui.min.js")"></script>
    <script src="@Url.Content("~/Content/assets/js/jqGrid/jquery.jqGrid.min.js")"></script>
    <script src="@Url.Content("~/Content/assets/js/uncompressed/jquery-ui.js")"></script>
    <script src="@Url.Content("~/Content/assets/js/uncompressed/jqGrid/jquery.jqGrid.js")"></script>
    @* <script src="@Url.Content("~/Content/assets/js/jquery-ui.custom.min.js")"></script>
        <script src="@Url.Content("~/Content/assets/js/jquery.ui.touch-punch.min.js")"></script>
        <script src="@Url.Content("~/Content/assets/js/jquery.easypiechart.min.js")"></script>
        <script src="@Url.Content("~/Content/assets/js/jquery.sparkline.min.js")"></script>



        <script src="@Url.Content("~/Content/assets/js/flot/jquery.flot.min.js")"></script>
        <script src="@Url.Content("~/Content/assets/js/flot/jquery.flot.pie.min.js")"></script>
        <script src="@Url.Content("~/Content/assets/js/flot/jquery.flot.resize.min.js")"></script>*@


    <!--[if IE]>
        <script type="text/javascript">
            window.jQuery || document.write("<script src='../assets/js/jquery1x.min.js'>"+"<"+"/script>");
        </script>
    <![endif]-->
    <script type="text/javascript">
        if ('ontouchstart' in document.documentElement) document.write("<script src='/Content/assets/js/jquery.mobile.custom.min.js'>" + "<" + "/script>");
    </script>


    <!-- page specific plugin scripts -->
    <!-- ace scripts -->
    <script src="@Url.Content("~/Content/assets/js/ace-elements.min.js")"></script>
    <script src="@Url.Content("~/Content/assets/js/ace.min.js")"></script>

    <!-- inline scripts related to this page -->
    <link rel="stylesheet" href="@Url.Content("~/Content/assets/css/ace.onpage-help.css")" />
    <link rel="stylesheet" href="@Url.Content("~/Content/csstree/_styles.css")" />

    <!-- page specific plugin scripts -->
    <script src="@Url.Content("~/Content/assets/js/jquery.dataTables.min.js")"></script>
    <script src="@Url.Content("~/Content/assets/js/jquery.dataTables.bootstrap.js")"></script>
    <script src="@Url.Content("~/Content/assets/js/bootstrap.min.js")"></script>
    <script src="@Url.Content("~/Content/assets/js/bootstrap-editable.min.js")"></script>
    <script src="@Url.Content("~/Content/assets/js/uncompressed/x-editable/bootstrap-editable.js")"></script>
    <script type="text/javascript"> ace.vars['base'] = '..'; </script>

    <script type="text/javascript">
        $(document).ready(function () {
            $('#testcyclestable').dataTable();
        });
    </script>

    <script src="@Url.Content("~/Content/assets/js/fuelux/data/fuelux.tree-sample-demo-data.js")"></script>
    <script src="@Url.Content("~/Content/assets/js/fuelux/fuelux.tree.min.js")"></script>


    <link rel="stylesheet" href="@Url.Content("~/Content/gritter/css/jquery.gritter.css")" />
    <script src="@Url.Content("~/Content/gritter/js/jquery.gritter.min.js")"></script>
    <script src="@Url.Content("~/Content/gritter/js/jquery.gritter.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/Scripts/commonScripts.js")"></script>
    <script src="@Url.Content("~/Content/flipclock/flipclock.js")"></script>
    <script src="@Url.Content("~/Content/jstree/jstree.min.js")"></script>
    
    <script type="text/javascript">
        var clock;

        $(document).ready(function () {
            var date = new Date('@DateTime.Now.ToString(CultureInfo.InvariantCulture)');

            clock = $('.clock').FlipClock(date, {
                clockFace: 'TwentyFourHourClock'
            });
        });
    </script>

    @if (!string.IsNullOrEmpty(ViewBag.ErrorMessage))
    {
        <script type="text/javascript">
            $(document).ready(function () {
                ShowMessage('Error', '@ViewBag.ErrorMessage');
            });
        </script>
    }

    <style>
        .clock {
            zoom: 0.3;
            -moz-transform: scale(0.3);
        }

        #cd .popover-content {
            width: 200px;
        }
    </style>

</head>
<body class="no-skin">
    <!-- #section:basics/navbar.layout -->
    <div id="navbar" class="navbar navbar-default">
        <script type="text/javascript">
            try {
                ace.settings.check('navbar', 'fixed');
            } catch (e) { }
        </script>

        <div class="navbar-container" id="navbar-container">
            <!-- #section:basics/sidebar.mobile.toggle -->
            <button type="button" class="navbar-toggle menu-toggler pull-left" id="menu-toggler">
                <span class="sr-only">Toggle sidebar</span>

                <span class="icon-bar"></span>

                <span class="icon-bar"></span>

                <span class="icon-bar"></span>
            </button>

            <!-- /section:basics/sidebar.mobile.toggle -->
            <div class="navbar-header pull-left">
                <!-- #section:basics/navbar.layout.brand -->
                <a href="@Url.Action("Index", "Home")" class="navbar-brand">
                    <small>
                        <i class="fa fa-gears"></i>
                        @{
                            if (User.Identity.IsAuthenticated && ServiceLocator.Current.GetInstance<ISessionHelper>().GetSessionDetails(User).Project != null)
                            {
                                //FormsAuthentication.SignOut();
                                //Response.Redirect("/Users/Index");
                                @(ServiceLocator.Current.GetInstance<ISessionHelper>().GetSessionDetails(User).Project.DisplayName)
                            }
                        }
                    </small>
                </a>

                <!-- /section:basics/navbar.layout.brand -->
                <!-- #section:basics/navbar.toggle -->
                <!-- /section:basics/navbar.toggle -->
            </div>

            <!-- #section:basics/navbar.dropdown -->
            <div class="navbar-buttons navbar-header pull-right" role="navigation">
                <ul class="nav ace-nav">
                    <li class="grey">
                        <div class="clock"></div>
                    </li>

                    <!-- #section:basics/navbar.user_menu -->
                    <li class="light-blue">
                        <a data-toggle="dropdown" class="dropdown-toggle">
                            <img class="nav-user-photo" src="@Url.Content("~/Content/assets/avatars/user.jpg")" alt="Jason's Photo" />
                            <span class="user-info">
                                @{var userName = User.Identity.IsAuthenticated ? ServiceLocator.Current.GetInstance<ISessionHelper>().GetUser(User).USerFullName
                                : "Guest";}
                                <small>Welcome,</small>
                                @userName
                            </span>

                            <i class="ace-icon fa fa-caret-down"></i>
                        </a>

                        <ul class="user-menu dropdown-menu-right dropdown-menu dropdown-yellow dropdown-caret dropdown-closer">
                            @{if (!User.Identity.IsAuthenticated)
                            {
                                <li>
                                    <a href="@Url.Action("Index", "Users")">
                                        <i class="ace-icon fa fa-question-circle"></i>
                                        Log In
                                    </a>
                                </li>
                            }
                            else
                            {
                                <li>
                                    <a href="@Url.Action("Index", "Help")">
                                        <i class="ace-icon fa fa-question-circle"></i>
                                        Help
                                    </a>
                                </li>
                                <li>
                                    <a href="@Url.Action("Profile", "Users")">
                                        <i class="ace-icon fa fa-cog"></i>
                                        Profile
                                    </a>
                                </li>
                                <li>
                                    <a href="@Url.Action("NotificationsSettings", "Users")">
                                        <i class="ace-icon fa fa-envelope"></i>
                                        Notifications settings
                                    </a>
                                </li>
                                <li>
                                    <a href="@Url.Action("SelectProject", "Users")">
                                        <i class="ace-icon fa fa-exchange"></i>
                                        Change project
                                    </a>
                                </li>
                                <li class="divider"></li>

                                <li>
                                    <a href="@Url.Action("Logout", "Users")">
                                        <i class="ace-icon fa fa-power-off"></i>
                                        Logout
                                    </a>
                                </li>
                            }
                            }

                        </ul>
                    </li>

                    <!-- /section:basics/navbar.user_menu -->
                </ul>
            </div>

            <!-- /section:basics/navbar.dropdown -->
        </div>
        <!-- /.navbar-container -->
    </div>

    <!-- /section:basics/navbar.layout -->
    <div class="main-container" id="main-container">
        <!-- #section:basics/sidebar -->
        <div id="sidebar" class="sidebar                  responsive">
            <script type="text/javascript">
                try { ace.settings.check('sidebar', 'fixed') } catch (e) { }
            </script>

            <div class="sidebar-shortcuts" id="sidebar-shortcuts">
                <div class="sidebar-shortcuts-large" id="sidebar-shortcuts-large">
                    <button class="btn btn-success">
                        <i class="ace-icon fa fa-signal"></i>
                    </button>

                    <button class="btn btn-info">
                        <i class="ace-icon fa fa-pencil"></i>
                    </button>

                    <!-- #section:basics/sidebar.layout.shortcuts -->
                    <button class="btn btn-warning">
                        <i class="ace-icon fa fa-users"></i>
                    </button>

                    <a href="@Url.Action("Project", "Configuration")" class="btn btn-danger">
                        <i class="ace-icon fa fa-cogs"></i>
                    </a>

                    <!-- /section:basics/sidebar.layout.shortcuts -->
                </div>

                <div class="sidebar-shortcuts-mini" id="sidebar-shortcuts-mini">
                    <span class="btn btn-success"></span>

                    <span class="btn btn-info"></span>

                    <span class="btn btn-warning"></span>

                    <span class="btn btn-danger"></span>
                </div>
            </div>
            <!-- /.sidebar-shortcuts -->

            <ul class="nav nav-list">
                <li class="@(Request.RawUrl.ToUpper().Contains("HOME/EXECUTIONREPORT") ? "active open" : "")">
                    <a href="@Url.Action("ExecutionReport", "Home")" style="cursor:pointer">
                        <i class="menu-icon fa fa-bar-chart-o"></i>
                        <span class="menu-text">Report Dashboard </span>
                    </a>
                    <b class="arrow"></b>
                </li>                

                <li class="@(Request.RawUrl.ToUpper() == "/NGGRS/" ? "active open" : "")">
                    <a href="@Url.Action("Index", "Home")" style="cursor:pointer">
                        <i class="menu-icon fa fa-tachometer"></i>
                        <span class="menu-text">Current Executions </span>
                    </a>
                    <b class="arrow"></b>
                </li>                

                <li class="@(Request.RawUrl.Contains("TestCycle/Index") ? "active open" : "")">
                    <a class="dropdown-toggle" style="cursor: pointer">
                        <i class="menu-icon fa fa-desktop"></i>
                        <span class="menu-text">Cycles</span>

                        <b class="arrow fa fa-angle-down"></b>
                    </a>
                    <b class="arrow"></b>
                    <ul class="submenu">
                        @if (User.Identity.IsAuthenticated)
                        {
                            foreach (var testCycle in ServiceLocator.Current.GetInstance<ISessionHelper>().GetActiveTestCycles(User).OrderByDescending(p => p.ID))
                            {
                                var name = testCycle.CycleName.Length > 30 ? testCycle.CycleName.Substring(0, 30) + "..." : testCycle.CycleName;
                                <li class="@(Request.RawUrl.Contains("TestCycle/Index/" + testCycle.ID) ? "active" : "")">
                                    <a style="font-size: xx-small" href="@Url.Action("Index", "TestCycle", new { id = testCycle.ID })" title="@testCycle.CycleName">
                                        <i class="menu-icon fa fa-caret-right"></i>
                                        @name
                                    </a>

                                    <b class="arrow"></b>
                                </li>
                            }
                        }
                    </ul>
                </li>

                <li class="@(Request.RawUrl.Contains("Configuration") ? "active open" : "")">
                    <a class="dropdown-toggle" style="cursor: pointer">
                        <i class="menu-icon fa fa-wrench"></i>
                        <span class="menu-text">Configuration </span>
                        <b class="arrow fa fa-angle-down"></b>
                    </a>
                    <b class="arrow"></b>
                    <ul class="submenu">
                        <li class="@(Request.RawUrl.Contains("Configuration/TestCycles") ? "active" : "")">
                            <a href="@Url.Action("TestCycles", "Configuration")">
                                <i class="menu-icon fa fa-caret-right"></i>
                                Test Cycles
                            </a>

                            <b class="arrow"></b>
                        </li>

                        @if ((User.Identity.IsAuthenticated && ServiceLocator.Current.GetInstance<ISessionHelper>().GetSessionDetails(User).User.UserGlobalAdmin) || (User.Identity.IsAuthenticated && ServiceLocator.Current.GetInstance<ISessionHelper>().GetSessionDetails(User).User.UserAdmin))
                        {
                        <li class="@(Request.RawUrl.Contains("Configuration/ReleaseInfos") ? "active" : "")">
                            <a href="@Url.Action("ReleaseInfos", "Configuration")">
                                <i class="menu-icon fa fa-caret-right"></i>
                                Release Info
                            </a>
                            <b class="arrow"></b>
                        </li>
                        <li class="@(Request.RawUrl.Contains("Configuration/TeamInfos") ? "active" : "")">
                            <a href="@Url.Action("TeamInfos", "Configuration")">
                                <i class="menu-icon fa fa-caret-right"></i>
                                Team Info
                            </a>
                            <b class="arrow"></b>
                        </li>
                        }
                        <li class="@((Request.RawUrl.Contains("Configuration/Project")
                        || Request.RawUrl.Contains("Configuration/CustomStatuses")) ? "active open" : "")">
                            <a class="dropdown-toggle" style="cursor: pointer">
                                <i class="menu-icon fa fa-caret-right"></i>
                                Project
                                <b class="arrow fa fa-angle-down"></b>
                            </a>

                            <b class="arrow"></b>
                            <ul class="submenu">
                                <li class="@(Request.RawUrl.Contains("Configuration/Project") ? "active" : "")">
                                    <a href="@Url.Action("Project", "Configuration")">
                                        <i class="menu-icon fa fa-cog"></i>
                                        Settings
                                    </a>

                                    <b class="arrow"></b>
                                </li>
                                <li class="@(Request.RawUrl.Contains("Configuration/CustomStatuses") ? "active" : "")">
                                    <a href="@Url.Action("CustomStatuses", "Configuration")">
                                        <i class="menu-icon fa fa-th"></i>
                                        Custom Statuses
                                    </a>

                                    <b class="arrow"></b>
                                </li>
                                <li class="@(Request.RawUrl.Contains("Configuration/SikuliObjectRepository") ? "active" : "")">
                                    <a href="@Url.Action("SikuliObjectRepository", "Configuration")">
                                        <i class="menu-icon fa fa-picture-o"></i>
                                        Sikuli Repository
                                    </a>

                                    <b class="arrow"></b>
                                </li>
                                <li class="@(Request.RawUrl.Contains("Configuration/Users") ? "active" : "")">
                                    <a href="@Url.Action("Users", "Configuration")">
                                        <i class="menu-icon fa fa-user"></i>
                                        Users
                                    </a>

                                    <b class="arrow"></b>
                                </li>
                            </ul>
                        </li>
                        <li class="@((Request.RawUrl.Contains("Configuration/Machines"))
                        || (Request.RawUrl.Contains("Configuration/Accounts"))
                        || (Request.RawUrl.Contains("Configuration/Environments"))
                        || (Request.RawUrl.Contains("Configuration/Frameworks"))
                        || (Request.RawUrl.Contains("Configuration/Configurations")) ? "active open" : "")">
                            <a class="dropdown-toggle" style="cursor: pointer">
                                <i class="menu-icon fa fa-caret-right"></i>
                                Executions
                                <b class="arrow fa fa-angle-down"></b>

                            </a>

                            <b class="arrow"></b>
                            <ul class="submenu">
                                <li class="@(Request.RawUrl.Contains("Configuration/Machines") ? "active" : "")">
                                    <a href="@Url.Action("Machines", "Configuration")">
                                        <i class="menu-icon fa fa-laptop"></i>
                                        Machines
                                    </a>

                                    <b class="arrow"></b>
                                </li>
                                <li class="@(Request.RawUrl.Contains("Configuration/Accounts") ? "active" : "")">
                                    <a href="@Url.Action("Accounts", "Configuration")">
                                        <i class="menu-icon fa fa-user"></i>
                                        Accounts
                                    </a>

                                    <b class="arrow"></b>
                                </li>
                                <li class="@(Request.RawUrl.Contains("Configuration/Environments") ? "active" : "")">
                                    <a href="@Url.Action("Environments", "Configuration")">
                                        <i class="menu-icon fa fa-flask"></i>
                                        Environments
                                    </a>

                                    <b class="arrow"></b>
                                </li>
                                <li class="@(Request.RawUrl.Contains("Configuration/Frameworks") ? "active" : "")">
                                    <a href="@Url.Action("Frameworks", "Configuration")">
                                        <i class="menu-icon fa fa-cubes"></i>
                                        Frameworks
                                    </a>

                                    <b class="arrow"></b>
                                </li>
                                <li class="@(Request.RawUrl.Contains("Configuration/Configurations") ? "active" : "")">
                                    <a href="@Url.Action("Configurations", "Configuration")">
                                        <i class="menu-icon fa fa-wrench"></i>
                                        Configurations
                                    </a>

                                    <b class="arrow"></b>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </li>

                <li class="@(Request.RawUrl.Contains("Reporting") ? "active open" : "")">
                    <a class="dropdown-toggle" style="cursor: pointer">
                        <i class="menu-icon fa fa-desktop"></i>
                        <span class="menu-text">Reporting</span>
                        <b class="arrow fa fa-angle-down"></b>
                    </a>
                    <b class="arrow"></b>
                    <ul class="submenu">
                        <li class="">
                            <a href="@Url.Action("CumulativeMain", "Reporting")">
                                <i class="menu-icon fa fa-caret-right"></i>
                                Cumulative
                            </a>
                        </li>
                        @*                           <li> <a href="@Url.Action("BugStatisticsMain", "Reporting")">
                                <i class="menu-icon fa fa-caret-right"></i>
                                Bug Statistics
                            </a></li>*@

                        <li>
                            <a href="@Url.Action("BugListMain", "Reporting")">
                                <i class="menu-icon fa fa-caret-right"></i>
                                Bug List
                            </a>
                        </li>

                        <li>
                            <a href="@Url.Action("QuickSummaryMain", "Reporting")">
                                <i class="menu-icon fa fa-caret-right"></i>
                                Quick Summary
                            </a>

                            <b class="arrow"></b>
                        </li>
                        <li class="">
                            <a href="@Url.Action("AnalysisMain", "Reporting")">
                                <i class="menu-icon fa fa-caret-right"></i>
                                Analysis
                            </a>
                        </li>
                    </ul>
                </li>

                <li class="@(Request.RawUrl.Contains("Launch") ? "active open" : "")">
                    <a class="dropdown-toggle" style="cursor: pointer">
                        <i class="menu-icon fa fa-gears"></i>
                        <span class="menu-text">Execution</span>
                        <b class="arrow fa fa-angle-down"></b>
                    </a>
                    <b class="arrow"></b>
                    <ul class="submenu">
                        <li class="@(Request.RawUrl.Contains("Launch/LoadBalanced") ? "active" : "")">
                            <a href="@Url.Action("LoadBalanced", "Launch")">
                                <i class="menu-icon fa fa-caret-right"></i>
                                Load Balanced
                            </a>
                        </li>
                        <li class="@(Request.RawUrl.Contains("Launch/Linear") ? "active" : "")">
                            <a href="@Url.Action("Linear", "Launch")">
                                <i class="menu-icon fa fa-caret-right"></i>
                                Linear
                            </a>
                        </li>                            
                    </ul>
                </li>
                @*<li class="@(Request.RawUrl.Contains("Execution") ? "active open" : "")">
                    <a class="dropdown-toggle" style="cursor: pointer">
                        <i class="menu-icon fa fa-toggle-right"></i>
                        <span class="menu-text">Execution</span>
                        <b class="arrow fa fa-angle-down"></b>
                    </a>
                    <b class="arrow"></b>
                    <ul class="submenu">
                        <li>
                            <a class="dropdown-toggle" style="cursor: pointer">
                                <i class="menu-icon fa fa-caret-right"></i>
                                Old
                                <b class="arrow fa fa-angle-down"></b>
                            </a>
                            <b class="arrow"></b>
                            <ul class="submenu">
                                <li class="@(Request.RawUrl.Contains("Execution/LoadBalanced") ? "active" : "")">
                                    <a href="@Url.Action("LoadBalanced", "Execution")">
                                        Load Balanced
                                    </a>
                                </li>
                                <li class="@(Request.RawUrl.Contains("Execution/Linear") ? "active" : "")">
                                    <a href="@Url.Action("Linear", "Execution")">
                                        Linear
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <li>
                            <a class="dropdown-toggle" style="cursor: pointer">
                                <i class="menu-icon fa fa-caret-right"></i>
                                New
                                <b class="arrow fa fa-angle-down"></b>
                            </a>

                            <b class="arrow"></b>

                            <ul class="submenu">
                                <li class="@(Request.RawUrl.Contains("Launch/LoadBalanced") ? "active" : "")">
                                    <a href="@Url.Action("LoadBalanced", "Launch")">
                                        Load Balanced
                                    </a>
                                </li>
                                <li class="@(Request.RawUrl.Contains("Launch/Linear") ? "active" : "")">
                                    <a href="@Url.Action("Linear", "Launch")">
                                        Linear
                                    </a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </li>*@
                @if (User.Identity.IsAuthenticated && ServiceLocator.Current.GetInstance<ISessionHelper>().GetSessionDetails(User).User.UserGlobalAdmin)
                {
                    <li class="@(Request.RawUrl.Contains("AdminTool") ? "active open" : "")">
                        <a class="dropdown-toggle" style="cursor: pointer">
                            <i class="menu-icon fa fa-gears"></i>
                            <span class="menu-text">Admin Tool</span>
                            <b class="arrow fa fa-angle-down"></b>
                        </a>


                        <b class="arrow"></b>

                        <ul class="submenu">
                            <li class="@(Request.RawUrl.Contains("AdminTool/GlobalNotifications") ? "active" : "")">
                                <a href="@Url.Action("GlobalNotifications", "AdminTool")">
                                    <i class="menu-icon fa fa-caret-right"></i>
                                    Global Notification
                                </a>
                            </li>
                            <li class="@(Request.RawUrl.Contains("AdminTool/UserAccesses") ? "active" : "")">
                                <a href="@Url.Action("UserAccesses", "AdminTool")">
                                    <i class="menu-icon fa fa-caret-right"></i>
                                    User Accesses
                                </a>
                            </li>
                            <li class="@(Request.RawUrl.Contains("AdminTool/AdminRights") ? "active" : "")">
                                <a href="@Url.Action("AdminRights", "AdminTool")">
                                    <i class="menu-icon fa fa-caret-right"></i>
                                    Admin Rights
                                </a>
                            </li>
                            <li class="@(Request.RawUrl.Contains("AdminTool/CreateNewUser") ? "active" : "")">
                                <a href="@Url.Action("CreateNewUser", "AdminTool")">
                                    <i class="menu-icon fa fa-caret-right"></i>
                                    Add New User
                                </a>
                            </li>
                            <li class="@(Request.RawUrl.Contains("AdminTool/AddNewProject") ? "active" : "")">
                                <a href="@Url.Action("AddNewProject", "AdminTool")">
                                    <i class="menu-icon fa fa-caret-right"></i>
                                    Add New Project
                                </a>
                            </li>
                            <li class="@(Request.RawUrl.Contains("AdminTool/DeleteOldRecord") ? "active" : "")">
                                <a href="@Url.Action("DeleteOldRecord", "AdminTool")">
                                    <i class="menu-icon fa fa-caret-right"></i>
                                    Delete Old Record
                                </a>
                            </li>
                            <li class="@(Request.RawUrl.Contains("AdminTool/ProjectTestSuits") ? "active" : "")">
                                <a href="@Url.Action("ProjectTestSuits", "AdminTool")">
                                    <i class="menu-icon fa fa-caret-right"></i>
                                    Manual Mangage Testsuits
                                </a>
                            </li>
                            @*<li class="@(Request.RawUrl.Contains("AdminTool/ManageTrackingRowsAndLogs") ? "active" : "")">
                                <a href="@Url.Action("ManageTrackingRowsAndLogs", "AdminTool")">
                                    <i class="menu-icon fa fa-caret-right"></i>
                                    Manage RelExecution Tracking Item
                                </a>
                            </li>*@
                            <li class="@(Request.RawUrl.Contains("AdminTool/UnTrackedFiles") ? "active" : "")">
                                <a href="@Url.Action("UnTrackedFiles", "AdminTool")">
                                    <i class="menu-icon fa fa-caret-right"></i>
                                    Delete Untracked files
                                </a>
                            </li>
                        </ul>
                    </li>
                }
            </ul>

            <!-- /.nav-list -->
            <!-- #section:basics/sidebar.layout.minimize -->
            <div class="sidebar-toggle sidebar-collapse" id="sidebar-collapse">
                <i class="ace-icon fa fa-angle-double-left" data-icon1="ace-icon fa fa-angle-double-left" data-icon2="ace-icon fa fa-angle-double-right"></i>
            </div>

            <!-- /section:basics/sidebar.layout.minimize -->
            <script type="text/javascript">
                try { ace.settings.check('sidebar', 'collapsed'); } catch (e) { }
            </script>
        </div>

        <!-- /section:basics/sidebar -->
        <div class="main-content">
            <div class="page-content">
                <div class="row">
                    <div class="col-xs-12">
                        <!-- PAGE CONTENT BEGINS -->
                        @RenderBody()
                        <!-- PAGE CONTENT ENDS -->
                    </div>
                    <!-- /.col -->
                </div>
                <!-- /.row -->
            </div>
            <!-- /.page-content -->
        </div>
        <!-- /.main-content -->
    </div>
    <!-- /.main-container -->
    <!-- basic scripts -->

    <div id="blockBack" align="center" class="updateprogressdiv1" style="display:none;">
    </div>
    <div id="divmiddle" align="center" class="updateprogressdiv2" style="display:none;">
        <div align="center" id="divdeepInner" class="deepInnerdiv">
            <table class="updateprogresstable">
                <tr>
                    <td align="center" style="border: none;">
                        <img src="~/Content/img/gear.gif" alt="Loading" style="border: none;" />
                        <br />
                        <span style="font-family: sans-serif; font-size: 14px; font-weight: 700; color: #DD5A43;">Please wait...</span>
                    </td>
                </tr>
            </table>
        </div>
    </div>
    <style type="text/css">
        .updateprogressdiv1 {
            background-color: Gray;
            filter: alpha(opacity=60);
            opacity: 0.60;
            width: 100%;
            top: 0px;
            left: 0px;
            position: fixed;
            height: 100%;
            z-index: 1000000;
            vertical-align: middle;
            align-content: center;
            align-items: center;
            align-self: center;
        }

        .updateprogressdiv2 {
            margin: auto;
            font-family: Trebuchet MS;
            filter: alpha(opacity=100);
            opacity: 1;
            font-size: small;
            vertical-align: middle;
            position: fixed;
            text-align: center;
            width: 200px;
            height: 100px;
            z-index: 1000010;
            top: 25%;
            left: 50%;
        }

        .updateprogresstable {
            /*background-color: White;*/
            font-family: Sans-Serif;
            text-align: center;
            color: #000000;
            width: 200px;
            height: 100px;
            border: none;
            -webkit-border-radius: 10px;
            -moz-border-radius: 10px;
            border-radius: 10px;
        }

        .deepInnerdiv {
            color: #000000;
            background-color: White;
            border: 1px solid #000000;
            -webkit-border-radius: 10px;
            -moz-border-radius: 10px;
            border-radius: 10px;
            z-index: 1000020;
            text-align: center;
            margin-left: -100px;
            margin-top: -70px;
            width: 200px;
            height: 140px;
        }
    </style>

@*<script>
    $(document).ready(function(){
        console.log( '@Request.RawUrl');
    });
</script>*@

</body>

</html>
